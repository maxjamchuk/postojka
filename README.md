# üü• POSTOJKA

![Postojka logo](./logo.png)

**Postojka** ‚Äî —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –Ω–∞ FastAPI, –∫–æ—Ç–æ—Ä—ã–π –ø–æ –≤—Ö–æ–¥–Ω–æ–º—É —Ç–µ–∫—Å—Ç—É –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–æ—Å—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞. –°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–æ–¥–µ–ª–∏ `sentence-transformers` –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `Faiss` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º.

---

## üß∞ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è              | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                     |
|------------------------|------------------------------------------------|
| **FastAPI**            | REST API –¥–ª—è –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–∞                        |
| **Sentence-Transformers** | –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ —Ç–µ–∫—Å—Ç–∞ (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫)   |
| **Faiss (CPU)**        | –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤            |
| **Docker**             | –£–ø–∞–∫–æ–≤–∫–∞ –∏ –∏–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞                    |
| **Uvicorn**            | ASGI-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ FastAPI               |

---

## ü§ñ –ß—Ç–æ —Ç–∞–∫–æ–µ Faiss?

**Faiss** ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –æ—Ç Facebook AI –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ –±–æ–ª—å—à–∏–º –Ω–∞–±–æ—Ä–∞–º –≤–µ–∫—Ç–æ—Ä–æ–≤. –í `Postojka` –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ—Å—Ç–æ–≤ –ø–æ —ç–º–±–µ–¥–¥–∏–Ω–≥—É –≤—Ö–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –Ω–∞ –¥–µ—Å—è—Ç–∫–∏ –∏ —Å–æ—Ç–Ω–∏ —Ç—ã—Å—è—á –∑–∞–ø–∏—Å–µ–π –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## üöÄ –ó–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä—É–π –ø—Ä–æ–µ–∫—Ç

```bash
git clone https://github.com/yourusername/postojka.git
cd postojka
````

### 2. –°–æ–±–µ—Ä–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

```bash
docker-compose up --build
```

–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞:
‚û° `http://localhost:8002/`

---

## üß™ Swagger-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
üìö [`http://localhost:8002/docs`](http://localhost:8002/docs)

### –ß—Ç–æ —Ç–∞–º –º–æ–∂–Ω–æ:

* –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä—É—á–∫—É `/recommend`
* –í–≤–µ—Å—Ç–∏ –ø—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)
* –ü–æ–ª—É—á–∏—Ç—å ID –∏ –æ—Ü–µ–Ω–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤

---

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Django

### –ü—Ä–∏–º–µ—Ä–Ω—ã–π –ø—É—Ç—å:

1. –í Django-—Å–æ—Ü—Å–µ—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å –≤—å—é—à–∫—É `RecommendedPostsView` (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `ListView`).
2. –ü—Ä–∏ –∑–∞—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –µ–≥–æ —Ç–µ–∫—Å—Ç/–∏–Ω—Ç–µ—Ä–µ—Å/ID –ª–∞–π–∫–Ω—É—Ç—ã—Ö –ø–æ—Å—Ç–æ–≤ –≤ `http://postojka:8000/recommend` (–∏–ª–∏ `localhost:8002` –≤–Ω–µ Docker).
3. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ `post_id` –∏ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ –Ω–∏–º `Post.objects.filter(id__in=...)`.
4. –í—ã–≤–µ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ ‚Äî "–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ".

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Django-–±–∏–±–ª–∏–æ—Ç–µ–∫—É `requests` –∏–ª–∏ `httpx`.

---

## üß± –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞

```http
POST /recommend
Content-Type: application/json

{
  "text": "–ú–Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è –∞–ª—å–±–æ–º –ó–µ–º—Ñ–∏—Ä—ã",
  "top_k": 3
}
```

–û—Ç–≤–µ—Ç:

```json
{
  "recommended": [
    {"post_id": 4, "score": 0.78},
    {"post_id": 1, "score": 0.65},
    ...
  ]
}
```